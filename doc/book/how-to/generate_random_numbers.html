<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>How to generate random numbers - nain4</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../tutorials.html"><strong aria-hidden="true">2.</strong> Tutorials</a></li><li class="chapter-item expanded "><a href="../how-to.html"><strong aria-hidden="true">3.</strong> How-To Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../how-to/install-nix.html"><strong aria-hidden="true">3.1.</strong> How to install nix</a></li><li class="chapter-item expanded "><a href="../how-to/enable-nain4-in-cmake.html"><strong aria-hidden="true">3.2.</strong> How to make nain4 available in a Geant4/cmake project</a></li><li class="chapter-item expanded "><a href="../how-to/start-a-nain4-based-project.html"><strong aria-hidden="true">3.3.</strong> How start a nain4-based project</a></li><li class="chapter-item expanded "><a href="../how-to/build-a-minimal-nain4-app.html"><strong aria-hidden="true">3.4.</strong> How to build a minimal nain4 app</a></li><li class="chapter-item expanded "><a href="../how-to/upgrade-nain4.html"><strong aria-hidden="true">3.5.</strong> How to upgrade your nain4 dependency</a></li><li class="chapter-item expanded "><a href="../how-to/generate_random_numbers.html" class="active"><strong aria-hidden="true">3.6.</strong> How to generate random numbers</a></li></ol></li><li class="chapter-item expanded "><a href="../explanation.html"><strong aria-hidden="true">4.</strong> Explanation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../explanation/placement-laziness-and-accumulation.html"><strong aria-hidden="true">4.1.</strong> Placement: laziness and accumulation</a></li><li class="chapter-item expanded "><a href="../explanation/displacements-and-rotations-are-not-commutative.html"><strong aria-hidden="true">4.2.</strong> Displacements and rotations are not commutative</a></li><li class="chapter-item expanded "><a href="../explanation/input-types-of-boolean-solids-methods.html"><strong aria-hidden="true">4.3.</strong> Input types of boolean solids' methods</a></li><li class="chapter-item expanded "><a href="../explanation/process-hits-return-value.html"><strong aria-hidden="true">4.4.</strong> Return value of G4VSensitiveDetector::ProcessHits</a></li><li class="chapter-item expanded "><a href="../explanation/why-nix.html"><strong aria-hidden="true">4.5.</strong> Why nix?</a></li></ol></li><li class="chapter-item expanded "><a href="../reference.html"><strong aria-hidden="true">5.</strong> Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/headers.html"><strong aria-hidden="true">5.1.</strong> Headers</a></li><li class="chapter-item expanded "><a href="../reference/n4-shape.html"><strong aria-hidden="true">5.2.</strong> Constructing solids and logical volumes</a></li><li class="chapter-item expanded "><a href="../reference/n4-place.html"><strong aria-hidden="true">5.3.</strong> Placement of physical volumes</a></li><li class="chapter-item expanded "><a href="../reference/n4-boolean-solids.html"><strong aria-hidden="true">5.4.</strong> Constructing boolean solids</a></li><li class="chapter-item expanded "><a href="../reference/managing-nain4-versions.html"><strong aria-hidden="true">5.5.</strong> Managing nain4 versions</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">nain4</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="how-to-generate-random-numbers"><a class="header" href="#how-to-generate-random-numbers">How to generate random numbers</a></h1>
<p><code>nain4</code> offers a range of utilities to generate random numbers. This includes
scalars, tuples and 3-vectors. All these methods are declared in the
<a href="../reference/headers.html">header</a> <code>&lt;n4-random.hh&gt;</code> which is transitively
included by <code>&lt;n4-utils.hh&gt;</code>. They are gathered in the namespace <code>nain4::random</code>.</p>
<h2 id="scalars"><a class="header" href="#scalars">Scalars</a></h2>
<p>The methods described in this section generate a single number.</p>
<h3 id="continuous-distributions"><a class="header" href="#continuous-distributions">Continuous distributions</a></h3>
<ul>
<li><code>uniform()</code>: generates a random floating point number homogeneously
distributed in the range [0, 1).</li>
<li><code>uniform(low, high)</code>: generates a random floating point number
homogeneously distributed in the range [<code>low</code>, <code>high</code>).</li>
<li><code>uniform_half_width(hw)</code>: generates a random floating point number
homogeneously distributed in the range [<code>-hw</code>, <code>hw</code>).</li>
<li><code>uniform_width(w)</code>: generates a random floating point number
homogeneously distributed in the range [<code>-w/2</code>, <code>w/2</code>).</li>
</ul>
<h3 id="discrete-distributions"><a class="header" href="#discrete-distributions">Discrete distributions</a></h3>
<ul>
<li><code>biased_coin(p_true)</code>: generates a random boolean with probability
<code>p_true</code> of being <code>true</code>.</li>
<li><code>fair_die(n_sides)</code>: generates a random unsigned integer in the
range [0, <code>n_sides - 1</code>] with equal probability.</li>
<li><code>gen = biased_choice(weights)</code>: provides a generator of unsigned integers
in the range [0, <code>weights.size() - 1</code>] with given <code>weights</code>. The
generator must be called to obtain a number: <code>random_number = gen()</code>.</li>
</ul>
<h2 id="tuples"><a class="header" href="#tuples">Tuples</a></h2>
<ul>
<li><code>random_in_disc(r)</code>: generates a pair of floating point numbers <code>{x, y}</code> that satisfy <code>x^2 + y^2 &lt;= r^2</code>.</li>
</ul>
<h2 id="3-vectors"><a class="header" href="#3-vectors">3-vectors</a></h2>
<p>The methods described in this section generate <code>G4ThreeVector</code>s.</p>
<ul>
<li><code>random_in_sphere(r)</code>: generates a vector of floating point numbers <code>{x, y, z}</code> that satisfy <code>x^2 + y^2 + z^2 &lt;= r^2</code>.</li>
</ul>
<h3 id="directions"><a class="header" href="#directions">Directions</a></h3>
<p><code>nain4</code> provides the <code>direction</code> builder to help generate random directions. By
default this tool generates unit vectors distributed isotropically in 4π, but it
can be configured to restrict the generation to certain directions.</p>
<p>The general usage pattern is</p>
<pre><code class="language-c++">auto generator = n4::random::direction{}.&lt;optional extra specifications&gt;;
auto one_random_unit_vector = generator.get();
</code></pre>
<p>The <code>&lt;optional extra specifications&gt;</code> are described below. <code>θ</code> (theta) is the
polar angle measured with respect to the positive z-axis and φ (phi) is the
azimuthal angle with <code>φ=0</code> in the plane of the positive x-axis and increasing
towards the positive y-axis, unless the axes are re-oriented with
<code>.rotate_{x,y,z}</code>.</p>
<p>The following specifiers (with hopefully self-explanatory names) restrict the angles of the generated directions</p>
<ul>
<li>
<p><code>{min,max}_theta(&lt;angle in radians&gt;)</code> or <code>(&lt;angle in degrees&gt; * deg)</code></p>
<ul>
<li>range: <code>[0, π]</code> or <code>[0, 180°]</code></li>
</ul>
</li>
<li>
<p><code>{min,max}_cos_theta(&lt;ratio&gt;)</code> range: <code>[-1, 1]</code></p>
</li>
<li>
<p><code>{min,max}_phi(&lt;angle in radians&gt;)</code> or <code>(&lt;angle in degrees&gt; * deg)</code></p>
<ul>
<li>range: <code>[0, 2π]</code> or <code>[0, 360°]</code></li>
</ul>
</li>
<li>
<p><code>rotate_{x,y,z}(&lt;angle in radians&gt;)</code> or <code>(&lt;angle in degrees&gt; * deg)</code></p>
<p>rotation around the specified axis. range: <code>[0, 2π]</code> or <code>[0, 360°]</code></p>
</li>
<li>
<p><code>rotate(&lt;G4RotationMatrix&gt;)</code></p>
</li>
<li>
<p><code>bidirectional()</code>: accept both the current selection and its
reflection in the origin.</p>
</li>
<li>
<p><code>exclude()</code>: invert the selection. Generates the complement of the selected
criteria. Bear in mind that this method is more computationally expensive as
it needs to generate directions until the result is not rejected. Very
restricted directionalities are discouraged.</p>
</li>
</ul>
<h4 id="examples"><a class="header" href="#examples">Examples</a></h4>
<p>TODO: add pictures</p>
<ul>
<li>
<p>Isotropic emission: <code>n4::direction{}</code></p>
</li>
<li>
<p>Opening angle around the positive z axis: <code>n4::direction().max_theta(theta)</code></p>
</li>
<li>
<p>Opening angle around the positive x axis: <code>n4::direction().max_theta(theta).rotate_y(90 * deg)</code></p>
</li>
<li>
<p>Only one octant:
<code>n4::direction().min_cos_theta(0).min_phi(CLHEP::halfpi).max_phi(CLHEP::pi)</code></p>
</li>
<li>
<p>Back-to-back beams around the positive z axis with some opening angle:
<code>n4::direction().max_theta(theta).bidirectional()</code></p>
</li>
<li>
<p>Isotropic except for some small angle around the negative z-axis:
<code>n4::direction().min_theta(7*CLHEP::pi/8).exclude()</code></p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../how-to/upgrade-nain4.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../explanation.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../how-to/upgrade-nain4.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../explanation.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
